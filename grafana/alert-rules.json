{"apiVersion":1,"groups":[{"orgId":1,"name":"Error Rate","folder":"Error Rate","interval":"1m","rules":[{"uid":"efag1lmr9l1j4e","title":"Error Rate by API method","condition":"C","data":[{"refId":"A","relativeTimeRange":{"from":600,"to":0},"datasourceUid":"prometheus","model":{"editorMode":"code","expr":"sum by (handler) (\r\n  rate(http_requests_total{job=\"users-service\", handler!~\"/(metrics|health|health/)\", status=~\"5..\"}[5m])\r\n)\r\n/\r\nsum by (handler) (\r\n  rate(http_requests_total{job=\"users-service\", handler!~\"/(metrics|health|health/)\"}[5m])\r\n)","instant":true,"intervalMs":1000,"legendFormat":"__auto","maxDataPoints":43200,"range":false,"refId":"A"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[0.5],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"dashboardUid":"adqp6xq","panelId":3,"noDataState":"NoData","execErrState":"Error","for":"2m","annotations":{"__dashboardUid__":"adqp6xq","__panelId__":"3","description":"Error Rate by API method \u003e 50%","summary":"Error Rate by API method \u003e 50%"},"isPaused":false,"notification_settings":{"receiver":"grafana-default-email"}},{"uid":"afag1vth3fri8a","title":"Error Rate (Nginx)","condition":"C","data":[{"refId":"A","relativeTimeRange":{"from":600,"to":0},"datasourceUid":"prometheus","model":{"editorMode":"code","expr":"sum(\r\n  rate(nginx_ingress_controller_requests{\r\n    job=\"nginx-ingress-nginx-controller-metrics\",\r\n    exported_namespace=\"default\",\r\n    exported_service=\"users-service\",\r\n    status=~\"5..\"\r\n  }[5m])\r\n)\r\n/\r\nsum(\r\n  rate(nginx_ingress_controller_requests{\r\n    job=\"nginx-ingress-nginx-controller-metrics\",\r\n    exported_namespace=\"default\",\r\n    exported_service=\"users-service\"\r\n  }[5m])\r\n)","instant":true,"intervalMs":1000,"legendFormat":"__auto","maxDataPoints":43200,"range":false,"refId":"A"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[0.5],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"dashboardUid":"adqp6xq","panelId":6,"noDataState":"NoData","execErrState":"Error","for":"2m","annotations":{"__dashboardUid__":"adqp6xq","__panelId__":"6","description":"Error Rate (Nginx) \u003e 0,5","summary":"Error Rate (Nginx) \u003e 0,5"},"isPaused":false,"notification_settings":{"receiver":"grafana-default-email"}}]},{"orgId":1,"name":"Latency","folder":"Latency","interval":"1m","rules":[{"uid":"afag4a3gs71moe","title":"Latency (response time) by API method","condition":"A","data":[{"refId":"p95","queryType":"alerting","relativeTimeRange":{"from":6720,"to":287},"datasourceUid":"prometheus","model":{"datasource":{"type":"prometheus","uid":"prometheus"},"editorMode":"code","expr":"histogram_quantile(0.95, sum by (le, handler) (rate(http_request_duration_seconds_bucket{job=\"users-service\",\r\nhandler!~\"/(metrics|health|health/|cause-5xx)\"}[5m])))","expression":"","instant":false,"intervalMs":1000,"legendFormat":"__auto","maxDataPoints":43200,"queryType":"alerting","range":true,"refId":"p95"}},{"refId":"A","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[0.5,0],"type":"gt"},"operator":{"type":"and"},"query":{"params":[]},"reducer":{"params":[],"type":"avg"},"type":"query"}],"datasource":{"name":"Expression","type":"__expr__","uid":"__expr__"},"expression":"B","hide":false,"intervalMs":1000,"maxDataPoints":43200,"refId":"A","type":"threshold"}},{"refId":"B","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[0,0],"type":"gt"},"operator":{"type":"and"},"query":{"params":[]},"reducer":{"params":[],"type":"avg"},"type":"query"}],"datasource":{"name":"Expression","type":"__expr__","uid":"__expr__"},"expression":"p95","hide":false,"intervalMs":1000,"maxDataPoints":43200,"reducer":"max","refId":"B","settings":{"mode":"replaceNN","replaceWithValue":0},"type":"reduce"}}],"dashboardUid":"adqp6xq","panelId":2,"noDataState":"NoData","execErrState":"Error","for":"5m","annotations":{"__dashboardUid__":"adqp6xq","__panelId__":"2","description":"Latency p95 \u003e 500ms","summary":"Latency p95 \u003e 500ms"},"isPaused":false,"notification_settings":{"receiver":"grafana-default-email"}}]}]}